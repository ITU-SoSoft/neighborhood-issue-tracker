# Locust Load Testing - Simplified for compatibility
# Works with older docker-compose versions

version: "3.8"

services:
  locust:
    build:
      context: .
      dockerfile: Dockerfile.loadtest
    container_name: locust-loadtest
    ports:
      - "8089:8089"
    environment:
      - LOAD_TEST_BASE_URL=https://staging-api.mahallem.biz.tr
    volumes:
      - ./results:/loadtest/results
    # Override to use Web UI mode for easier access
    command: >
      locust -f loadtests/locustfile.py
      --host=https://staging-api.mahallem.biz.tr
      --web-host=0.0.0.0
